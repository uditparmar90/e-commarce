{% extends "base.html" %}
{% load static %}

{% block description %}{{product.description}}{% endblock %}
{% block robots %}index, follow{% endblock %}
{% block keywords %}signup, myshop{% endblock %}
{% block css %}{% static "products/signup.css" %}{% endblock %}
{% block title %}{{product.title}}{% endblock %}

{% block body %}
    
    {% include "includes/nav.html" %}
    <div id="product_main_div">
        <main style="padding:40px 200px ;  display:flex;">
            <div style=" display: flex; align-self:center;">
            <img src="{{product.image.url}}" style="border-radius: 10px;"> 
            </div> 
            
            <div style="width:40vw;background-color:lightgray; border-radius:10px;padding:10px; margin:auto;">
                <p>{{product.title}}</p>
                <p>{{product.description}}</p>
                <p>{{product.brand.title}}</p>
                <h2>{{product.price}}</h2>
                <p>{{product.}}</p>
                <button>Add to Cart</button>
            </div>
            {% comment %} <div>
                {%for suggestion in product.suggestion%}
                <h1>{{suggestion}}</h1>
                {% endfor %}
            </div> {% endcomment %}
        </main>
        <section style="margin:40px 200px; padding:15px 15px; background-color:lightgray; border-radius:10px;">
            <h3 style="font-weight:bold; margin:0px;">write your reviews</h3>
            <form action="" method="POST">
                {% csrf_token %}
                {% comment %} <input type="text" placeholder="write your review" name="review">
                <button style="width:auto;padding:10px;display:flex!important;margin:20px 0px";>Submit</button> {% endcomment %}
                {% if success_message %}
                <div class="alert alert-success" style="color:green;">
                    {{ success_message }}
                </div>
                {% endif %}
                {% for field in form %}<br>
                {{field.label_tag}}<br>
                {{field}}<br>
                {% if field.help_text %}
                {{field.help_text}}
                {% endif %}
                {%for error in field.errors%}
                    <p style="color:red;">{{error}}</p>
                {% endfor %}<br>
                {% endfor %}
                <button type="Submit">Submit</button>
                                
            </form>
            
            <div style="width:95%; padding:20px; display: flex; flex-direction:column; background:whitesmoke;">
                <h3 style="font-weight:bold; margin:0px;">Reviews</h3>

                {%for data in feedbackData%}
                <span style="font-size:10px;">{{data.name}}</span>
                <span style="font-size:15px;">{{data.text}}</span>
                <span style="font-size:15px;">ratings : {{data.rating}}</span> 
                <button onclick = "showRatings('{{data.rating}}')">Call</button>
                <div class="progress" style="width: 100%;
                height: 20px;
                background-color: red;
                border-radius: 4px;
                overflow: hidden;">
                    <div class="progress-bar1" role="progressbar" id="progressBar"aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style = 'width:{{data.rating}}%; background:orange;' ></div>
                </div>                
                {%endfor%}
            <div>
            
        </section> 
        
        <script>
            function showRatings(rating){
                var progressbar=document.getElementsByClassName("progress-bar1"); 
               // progressBar.style.width=`${rating}*($rating*10)`;
                var rate=(rating*20)/rating;
                var finalwidth=rating*rate;
                progressbar.style.width=finalwidth;      
                //return progressBar
            }
            
        </script>
         
{% endblock %}